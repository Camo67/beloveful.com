name = "beloveful-visions"
main = "src/worker.js"
compatibility_date = "2025-09-01"
workers_dev = false

# Custom domain routes must be defined at the top-level
routes = [
  # Match both apex and any subdomain paths for SPA routing
  { pattern = "*beloveful.com/*", zone_name = "beloveful.com" }
]

[assets]
directory = "dist"
binding = "ASSETS"

# R2 bucket configuration
[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "beloveful"

# Database configuration
[[d1_databases]]
binding = "DB"
database_name = "beloveful-cms"
database_id = "5974f712-89ce-491f-baf7-37b7dcfa91cb"

# Environment variables (set via wrangler secret put)
# Required secrets:
# - CLOUDINARY_CLOUD_NAME
# - CLOUDINARY_API_KEY
# - CLOUDINARY_API_SECRET
#
# To set secrets, run:
# wrangler secret put CLOUDINARY_CLOUD_NAME
# wrangler secret put CLOUDINARY_API_KEY
# wrangler secret put CLOUDINARY_API_SECRET
